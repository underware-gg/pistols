@import 'aspect';
@import 'color';

@keyframes RingPulse {
  0%, 100% {
    filter: drop-shadow(0 0 8px var(--ring-glow-color)) 
            drop-shadow(0 0 16px var(--ring-glow-color));
  }
  50% {
    filter: drop-shadow(0 0 12px var(--ring-glow-color)) 
            drop-shadow(0 0 24px var(--ring-glow-color));
  }
}

@keyframes ShineSweep {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.TavernRingItem {
  display: flex;
  align-items: center;
  gap: aspect-width(1);
  padding: aspect-width(0.5);
  background-color: rgba(139, 69, 19, 0.3);
  border-radius: aspect-width(0.5);
  border: aspect-width(0.1) solid #8B4513;
  opacity: 0;
  animation: fadeIn 0.8s ease-out forwards;
  margin-bottom: aspect-width(0.5);

  .TavernRingItemImage {
    width: aspect-width(3);
    height: aspect-width(3);
    border-radius: aspect-width(0.3);
  }

  .TavernRingItemContent {
    flex: 1;

    .TavernRingItemTitle {
      font-size: aspect-width(1.4);
      font-weight: bold;
      color: #FFD700;
      margin-bottom: aspect-width(0.2);
    }

    .TavernRingItemSubtitle {
      font-size: aspect-width(1.2);
      color: #FFF8DC;
      opacity: 0.9;
    }
  }

  .TavernRingItemButton {
    font-size: aspect-width(1.2);
    padding: aspect-width(0.4) aspect-width(0.8);
    cursor: pointer;
    opacity: 1;

    &:disabled {
      cursor: wait;
      opacity: 0.7;
    }
  }
}

.RingAnimationOverlay {
  background-color: rgba(0, 0, 0, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  pointer-events: none;

  &.RingAnimationOverlay1 { // GoldSignetRing
    --ring-glow-color: rgba(255, 215, 0, 0.3);
    --ring-name-color: #DAA520;
    --ring-image: url('/images/ui/rings/GoldRing.png');
  }
  
  &.RingAnimationOverlay2 { // SilverSignetRing
    --ring-glow-color: rgba(192, 192, 192, 0.3);
    --ring-name-color: #A0A0A0;
    --ring-image: url('/images/ui/rings/SilverRing.png');
  }
  
  &.RingAnimationOverlay3 { // LeadSignetRing
    --ring-glow-color: rgba(169, 169, 169, 0.3);
    --ring-name-color: #2F4F4F;
    --ring-image: url('/images/ui/rings/LeadRing.png');
  }

  .RingAnimationContainer {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    z-index: 10001;
    overflow: visible;
    border-radius: aspect-width(2);

    .RingAnimationImage {
      width: aspect-width(25);
      height: aspect-width(25);
      border-radius: aspect-width(1);
      filter: drop-shadow(0 0 8px var(--ring-glow-color)) 
              drop-shadow(0 0 16px var(--ring-glow-color));
      position: relative;
      z-index: 1;
      animation: RingPulse 2s ease-in-out infinite;
    }

    .RingAnimationShineContainer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
      -webkit-mask: var(--ring-image) center / contain no-repeat;
      mask: var(--ring-image) center / contain no-repeat;

      .RingAnimationShineSweep {
        position: absolute;
        top: 0;
        left: -150%;
        width: 200%;
        height: 100%;
        background: linear-gradient(
          50deg, 
          transparent 0%, 
          transparent 30%, 
          rgba(255, 255, 255, 0.2) 47%, 
          rgba(255, 255, 255, 0.8) 50%, 
          rgba(255, 255, 255, 0.2) 53%, 
          transparent 70%, 
          transparent 100%
        );
        pointer-events: none;
      }
    }
  }

  .RingInfoCard {
    position: absolute;
    left: aspect-width(60);
    transform: translateX(-50%) rotate(10deg);
    pointer-events: none;
    opacity: 0;
    width: aspect-width(35);
    transition: opacity 0.8s ease-out;
    background-color: rgba(101, 69, 58, 1);
    border-radius: aspect-width(0.5);
    padding: aspect-width(1.5);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.1);

    &.RingInfoCardVisible {
      pointer-events: auto;
      opacity: 1;
    }

    .RingInfoCardCorner {
      position: absolute;
      width: aspect-width(3);
      height: aspect-width(3);
      background-color: rgba(101, 69, 58, 1);
      z-index: 2;
      border-radius: aspect-width(2);
      display: flex;
      align-items: center;
      justify-content: center;

      &.TopRight {
        top: 0;
        right: 0;
      }

      &.BottomLeft {
        bottom: 0;
        left: 0;
      }

      &.BottomRight {
        bottom: 0;
        right: 0;
      }

      &.TopLeft {
        top: 0;
        left: 0;
      }
    }

    .RingInfoCardContent {
      background-color: rgba(245, 222, 179, 0.95);
      border-radius: aspect-width(0.3);
      padding: aspect-width(1.2);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(4px);
      position: relative;
      z-index: 1;

      .RingInfoCardTitle {
        text-align: center;
        margin-bottom: aspect-width(0.5);
        font-family: serif;

        .RingInfoCardTitleMain {
          font-size: aspect-width(1.8);
          font-weight: bold;
          color: #8B4513;
          text-transform: uppercase;
          letter-spacing: 2px;
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
          margin-bottom: aspect-width(0.3);
        }

        .RingInfoCardTitleSub {
          font-size: aspect-width(1.4);
          font-weight: bold;
          color: #8B4513;
          text-transform: uppercase;
          letter-spacing: 1px;
          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
          margin-bottom: aspect-width(0.5);
        }

        .RingInfoCardTitleDivider {
          width: 100%;
          height: aspect-width(0.1);
          background: linear-gradient(90deg, transparent 0%, #DAA520 50%, transparent 100%);
          margin-bottom: aspect-width(0.5);
        }
      }

      .RingInfoCardRecognition {
        text-align: center;
        margin-bottom: aspect-width(1);
        font-family: serif;

        .RingInfoCardRecognitionIntro {
          font-size: aspect-width(0.9);
          color: #8B4513;
          margin-bottom: aspect-width(0.3);
          font-style: italic;
          line-height: 1.6;
        }

        .RingInfoCardRecognitionName {
          font-size: aspect-width(1.4);
          font-weight: bold;
          color: #8B4513;
          letter-spacing: 1px;
          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
          margin-bottom: aspect-width(0.8);
          position: relative;
          display: inline-block;

          &::after {
            content: '';
            position: absolute;
            bottom: aspect-width(-0.2);
            left: aspect-width(-5);
            right: aspect-width(-5);
            height: aspect-width(0.06);
            background: #8B4513;
            border-radius: aspect-width(0.04);
          }
        }

        .RingInfoCardRecognitionDescription {
          font-size: aspect-width(0.9);
          color: #8B4513;
          margin-bottom: aspect-width(0.8);
          font-style: italic;
          line-height: 1.6;
        }

        .RingInfoCardRecognitionRingName {
          font-size: aspect-width(2);
          font-weight: 900;
          color: var(--ring-name-color, #8B4513);
          text-transform: uppercase;
          letter-spacing: aspect-width(0.1);
          margin-bottom: aspect-width(0.8);
          text-shadow: 
            0 aspect-width(0.02) aspect-width(0.04) rgba(0, 0, 0, 0.4),
            0 aspect-width(0.01) aspect-width(0.02) rgba(255, 255, 255, 0.8),
            0 aspect-width(0.03) aspect-width(0.06) rgba(0, 0, 0, 0.2);
          -webkit-text-stroke: aspect-width(0.01) rgba(0, 0, 0, 0.1);
        }

        .RingInfoCardRecognitionGratitude {
          font-size: aspect-width(1);
          color: #8B4513;
          font-style: italic;
          line-height: 1.6;
        }
      }

      .RingInfoCardStampDivider {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: aspect-width(1.5);
        position: relative;

        .RingInfoCardStampLine {
          flex: 1;
          height: aspect-width(0.1);
          background: linear-gradient(90deg, transparent 0%, #DAA520 20%, #DAA520 80%, transparent 100%);
          position: relative;
        }

        .RingInfoCardStamp {
          width: aspect-width(4);
          height: aspect-width(4);
          display: flex;
          align-items: center;
          justify-content: center;
          margin: 0 aspect-width(0.4);
          position: relative;
          object-fit: cover;
        }
      }

      .RingInfoCardBenefitsIntro {
        text-align: center;
        margin-bottom: aspect-width(1);
        font-family: serif;

        .RingInfoCardBenefitsIntroText {
          font-size: aspect-width(0.9);
          color: #8B4513;
          font-style: italic;
          line-height: 1.4;
          margin-bottom: aspect-width(0.8);
        }
      }

      .RingInfoCardBenefitsList {
        font-size: aspect-width(0.8);
        color: #8B4513;
        margin-bottom: aspect-width(1.5);
        text-align: center;
        font-family: serif;

        .RingInfoCardBenefitItem {
          font-size: aspect-width(0.8);
          color: #8B4513;
          margin-bottom: aspect-width(0.4);
          line-height: 1.5;
          font-style: italic;
        }
      }

      .RingInfoCardBottomSection {
        display: flex;
        justify-content: space-between;
        margin-bottom: aspect-width(1.5);
        font-family: serif;

        .RingInfoCardBottomField {
          text-align: left;

          &.RingInfoCardBottomFieldRight {
            text-align: right;
          }

          .RingInfoCardBottomLabel {
            font-size: aspect-width(0.7);
            color: #8B4513;
            margin-bottom: aspect-width(0.2);
            font-style: italic;
          }

          .RingInfoCardBottomValue {
            font-size: aspect-width(0.8);
            color: #8B4513;
            border-bottom: aspect-width(0.05) solid #8B4513;
            padding-bottom: aspect-width(0.1);
            min-width: aspect-width(3);
          }
        }
      }

      .RingInfoCardCloseButton {
        width: 100%;
        font-size: aspect-width(1);
        padding: aspect-width(0.6) aspect-width(1.2);
        background-color: rgba(139, 69, 19, 0.9);
        border: aspect-width(0.15) solid #8B4513;
        border-radius: aspect-width(0.3);
        color: #F5DEB3;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        font-family: serif;
        text-transform: uppercase;
        letter-spacing: 0.5px;

        &:hover {
          background-color: rgba(160, 82, 45, 0.95);
          transform: translateY(-1px);
        }
      }
    }
  }
}
